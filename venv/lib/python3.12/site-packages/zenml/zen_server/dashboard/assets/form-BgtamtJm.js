import{ai as C,z as c,B as b,ay as O,aU as w,aV as R,aW as T,aX as $,ar as E,aY as z,I as y,bp as I}from"./index-BgEfQ3_G.js";import{j as t}from"./@radix-Cdvw4jJ8.js";import{S as A}from"./plus-Cl0_rCVF.js";import{S as J}from"./trash-DP6Tpp_E.js";import{a as f,b as V,C as x}from"./index.esm-DhJo3mA6.js";import{b as q,i as B}from"./type-guards-CNgPYg8l.js";function k(e){return e.type==="string"}function D(e){return e.type==="string"&&e.enum!==void 0}function P(e){return e.type==="string"&&!!e.sensitive}function S(e){return e.type==="boolean"}function F(e){return e.type==="object"}function g(e){return e.type==="array"}function _(e){return e.type==="integer"}function U(e){var s;return((s=e.enum)==null?void 0:s.map(l=>l.toString()))||[]}function h(e,s){if(!e.$ref||!s)return e;const l=e.$ref.replace("#/$defs/",""),a=s[l];return a||console.error(`Could not resolve $ref: ${e.$ref}`),a}function Y(e,s){return e.title?e.title:C(s)}function oe(e,s){const l=Object.entries(e.properties||{}).reduce((a,[n,r])=>{let o="";return r.default?S(r)?o=r.default:F(r)?o=JSON.stringify(r.default):g(r)?o=r.default:o=r.default.toString():g(r)&&(o=[]),{...a,[n]:o}},{});return s&&Object.entries(s).forEach(([a,n])=>{var o;const r=(o=e.properties)==null?void 0:o[a];r&&S(r)?l[a]=n==="True"?!0:n==="False"?!1:!!n:l[a]=q(n)?n.map(i=>JSON.stringify(i)):B(n)?JSON.stringify(n):n}),l}function ae(e){const s=Object.keys(e).reduce((l,a)=>(l[a]=c.string().trim().min(1),l),{});return c.object(s)}function ce(e){if(!e.properties)return c.object({});const s=e.required||[],l=e.properties,a=Object.keys(l).reduce((n,r)=>{const o=l[r];if(!o)return n;const i=Z(r,s);return n[r]=v(o,e.$defs,i),n},{});return c.object(a)}function v(e,s,l,a=!1){let n=N(e,s);if(n.anyOf){const o=n.anyOf.find(i=>i.type!==null);o&&(n=N(o,s))}switch(n.allOf&&(n=N(n.allOf[0],s)),n.type){case"string":return l?c.string().trim():c.string().trim().min(1,"Required");case"boolean":return l?c.union([c.literal(""),c.boolean()]):c.boolean();case"array":{if(a)return l?c.union([c.literal(""),p]):p;const o=c.array(v(n.items||{},s,!1,!0));return l?o:o.min(1)}case"object":return l?c.union([c.literal(""),p]):p;case"integer":return l?c.union([c.literal(""),c.preprocess(o=>Number(o),c.number().int())]):c.preprocess(o=>Number(o),c.number().int());default:return l?c.union([c.literal(""),c.string()]):c.string().min(1,"Required")}}function Z(e,s){return!s.includes(e)}const p=c.string().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}},{message:"Invalid JSON"}).transform(e=>e===""?e:JSON.parse(e));function N(e,s){if(!e.$ref||!s)return e;const l=e.$ref.split("/").pop();return!l||!s[l]?e:s[l]}function m({label:e,isOptional:s}){return t.jsxs(t.Fragment,{children:[e,!s&&t.jsx("span",{className:"text-theme-text-error","aria-label":"required",children:"*"})]})}function H({name:e,label:s,isOptional:l,schema:a,definitions:n}){const r=f(),{fields:o,append:i,remove:u}=V({name:e,control:r.control});return t.jsxs("div",{className:"space-y-3",children:[!!s&&t.jsx("label",{className:"text-text-sm",children:t.jsx(m,{label:s,isOptional:l})}),t.jsx("ul",{className:"space-y-5",children:o.map((j,d)=>t.jsxs("li",{className:"flex w-full items-center gap-4 [&>div]:w-full",children:[t.jsx(Q,{isNested:!0,name:`${e}.${d}`,schema:a,isOptional:l,definitions:n}),t.jsxs(b,{className:"h-7 w-7",emphasis:"subtle",size:"sm",type:"button",onClick:()=>u(d),children:[t.jsx(J,{className:"h-5 w-5 fill-primary-900"}),t.jsx("span",{className:"sr-only",children:"remove"})]})]},j.id))}),t.jsxs(b,{className:"h-7 w-7",emphasis:"subtle",type:"button",onClick:()=>i(""),children:[t.jsx(A,{className:"h-5 w-5 fill-primary-900"}),t.jsx("p",{className:"sr-only",children:"Add Item"})]})]})}function K({name:e,isOptional:s,label:l}){var r;const a=f(),n=a.formState.errors[e];return t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!!l&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(m,{label:l,isOptional:s})}),t.jsx(x,{control:a.control,name:e,render:({field:{onChange:o,value:i,...u}})=>t.jsx(O,{id:e,checked:i,onCheckedChange:j=>o(j),...u})}),n&&t.jsx("p",{className:"text-text-sm text-error-500",children:(r=n.message)==null?void 0:r.toString()})]})}function M({name:e,label:s,isOptional:l,enumValues:a}){var o;const n=f(),r=n.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(m,{label:s,isOptional:l})}),t.jsx(x,{control:n.control,name:e,render:({field:{onChange:i,ref:u,...j}})=>t.jsxs(w,{...j,onValueChange:i,children:[t.jsx(R,{"data-error":r?"true":"false",className:"h-7 max-w-full truncate border border-neutral-300 px-2 text-left text-text-sm data-[error=true]:border-error-500",children:t.jsx(T,{placeholder:"Select Option"})}),t.jsx($,{children:t.jsx(E,{viewportClassName:"max-h-[300px]",children:a.map(d=>t.jsx(z,{className:"space-x-2",value:d,children:d},d))})})]})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(o=r.message)==null?void 0:o.toString()})]})}function W({name:e,isOptional:s,label:l}){var r;const a=f(),n=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!l&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(m,{label:l,isOptional:s})}),t.jsx(x,{control:a.control,name:e,render:({field:o})=>t.jsx(y,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...o,type:"number","data-error":n?"true":"false"})}),n&&t.jsx("p",{className:"text-text-sm text-error-500",children:(r=n.message)==null?void 0:r.toString()})]})}function X({name:e,label:s,isOptional:l}){var r;const a=f(),n=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(m,{label:s,isOptional:l})}),t.jsx(x,{control:a.control,name:e,render:({field:o})=>t.jsx("textarea",{rows:4,placeholder:"Please paste your JSON",className:I({inputSize:"md",className:"h-auto w-full resize-none font-mono data-[error=true]:border-error-500"}),id:e,...o,"data-error":n?"true":"false"})}),n&&t.jsx("p",{className:"text-text-sm text-error-500",children:(r=n.message)==null?void 0:r.toString()})]})}function G({name:e,isOptional:s,label:l}){var r;const a=f(),n=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!l&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(m,{label:l,isOptional:s})}),t.jsx(x,{control:a.control,name:e,render:({field:o})=>t.jsx(y,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...o,"data-error":n?"true":"false"})}),n&&t.jsx("p",{className:"text-text-sm text-error-500",children:(r=n.message)==null?void 0:r.toString()})]})}function L({name:e,label:s,isOptional:l}){var r;const a=f(),n=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(m,{label:s,isOptional:l})}),t.jsx(x,{control:a.control,name:e,render:({field:o})=>t.jsx(y,{placeholder:"Use {{<SECRET_NAME>.<SECRET_KEY>}} to reference a secret",inputSize:"md",className:"w-full placeholder:font-mono data-[error=true]:border-error-500",id:e,...o,type:"text","data-error":n?"true":"false"})}),n&&t.jsx("p",{className:"text-text-sm text-error-500",children:(r=n.message)==null?void 0:r.toString()})]})}function Q({schema:e,name:s,isOptional:l,definitions:a,isNested:n}){let r=h(e,a);n&&r.items&&(r=h(r.items,a)),n&&r.prefixItems&&(r=h(r.prefixItems[0],a));const o=n?"":Y(r,s);if(r.anyOf){const i=r.anyOf.find(u=>u.type!==null);if(i){const u=h(i,a);r={...r,...u}}}if(r.allOf){const i=h(r.allOf[0],a);r={...r,...i}}if(D(r))return t.jsx(M,{name:s,label:o,schema:e,isOptional:l,enumValues:U(r)});if(P(r))return t.jsx(L,{name:s,label:o,schema:r,isOptional:l});if(_(r))return t.jsx(W,{name:s,label:o,schema:r,isOptional:l});if(k(r))return t.jsx(G,{name:s,label:o,schema:r,isOptional:l});if(S(r))return t.jsx(K,{name:s,label:o,schema:r,isOptional:l});if(F(r)||g(r)&&n)return t.jsx(X,{name:s,label:o,schema:r,isOptional:l});if(g(r))return t.jsx(H,{definitions:a,name:s,label:o,schema:r,isOptional:l})}export{Q as D,oe as a,Z as b,ce as g,ae as z};
