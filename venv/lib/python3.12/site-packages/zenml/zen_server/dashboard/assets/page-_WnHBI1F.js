import{r as l,j as e}from"./@radix-Cdvw4jJ8.js";import{u as c,S as x,a as y,b as v}from"./form-schemas-dyDkAxXP.js";import{A as j,I as U,P as h,U as b,S as _}from"./UsageReason-DhiUV1bu.js";import{a as g,S as C,b9 as P,e as w,g as A}from"./index-BgEfQ3_G.js";import{u as E}from"./update-current-user-mutation-Ca-Lmwuj.js";import{h as F}from"./@tanstack-5gTMR7G2.js";import"./check-circle-C4tYvbtw.js";import"./@react-router-DeDfXbUF.js";import"./UpdatePasswordSchemas-D_DCETSO.js";import"./zod-XdS2h1ws.js";import"./index.esm-DhJo3mA6.js";import"./gcp-B1I3Qvcx.js";import"./@reactflow-B_iCtR7X.js";const S=l.createContext(null);function H({children:t,initialUser:n}){const[a,r]=l.useState(n||{});return e.jsx(S.Provider,{value:{user:a,setUser:r},children:t})}function d(){const t=l.useContext(S);if(t===null)throw new Error("useSurveyUserContext must be used within an SurveyUserProvider");return t}function D({user:t}){var u,i;const{setSurveyStep:n}=c(),{setUser:a}=d();function r({fullName:s,getUpdates:m,email:o}){a(p=>({...p,...o?{email:o}:{email:null},full_name:s,email_opted_in:m})),n(2)}return e.jsx(j,{email:(u=t.metadata)==null?void 0:u.email,fullName:(i=t.body)==null?void 0:i.full_name,submitHandler:r})}function I(){const{user:t}=d(),{setSurveyStep:n}=c(),{toast:a}=g(),r=F(),{mutate:u}=E({onSuccess:async()=>{await r.invalidateQueries({queryKey:P()}),n(s=>s+1)},onError:s=>{s instanceof Error&&a({status:"error",emphasis:"subtle",icon:e.jsx(C,{className:"h-5 w-5 shrink-0 fill-error-700"}),description:s.message,rounded:!0})}});function i({other:s,providers:m,otherVal:o}){const f={infra_providers:s?[...m,o]:m,finished_onboarding_survey:!0};u({...t,user_metadata:{...t.user_metadata,...f}})}return e.jsx(U,{submitHandler:i})}function R({user:t}){const{setSurveyStep:n}=c(),{setUser:a}=d();function r({primaryUse:u}){const i={primary_use:u};a(s=>({...s,user_metadata:{...s.user_metadata,...i}})),n(3)}return e.jsx(h,{user:t,submitHandler:r})}function k(){const{setSurveyStep:t}=c(),{setUser:n}=d();function a({usageReason:r,comparison_tools:u,otherTool:i,otherToolVal:s}){const m={usage_reason:r,...!!u&&{comparing_tools:i&&s?[...u,s]:u}};n(o=>({...o,user_metadata:{...o.user_metadata,...m}})),t(o=>o+1)}return e.jsx(b,{submitHandler:a})}function M(){const{data:t,isPending:n,isError:a}=w({throwOnError:!0}),{surveyStep:r}=c();return a?null:n?e.jsx(A,{className:"h-[300px]"}):e.jsx(e.Fragment,{children:e.jsxs(H,{children:[e.jsx(x,{stepAmount:5}),r===1&&e.jsx(D,{user:t}),r===2&&e.jsx(R,{user:t}),r===3&&e.jsx(k,{}),r===4&&e.jsx(I,{}),r===5&&e.jsx(_,{}),r===6&&e.jsx(y,{subHeader:"Your ZenML account is now updated",displayBody:!1,username:t.name})]})})}function T(){return e.jsx("div",{children:e.jsx(v,{children:e.jsx(M,{})})})}export{T as default};
